2019-07-31 19:12:15,171 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.saml.common.binding.impl.CheckMessageVersionHandler' on INBOUND message context
2019-07-31 19:12:15,172 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,174 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.saml.saml1.binding.impl.SAML1ArtifactRequestIssuerHandler' on INBOUND message context
2019-07-31 19:12:15,174 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,176 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.saml.common.binding.impl.SAMLProtocolAndRoleHandler' on INBOUND message context
2019-07-31 19:12:15,177 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,179 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.saml.common.binding.impl.SAMLMetadataLookupHandler' on INBOUND message context
2019-07-31 19:12:15,180 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,181 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.saml.common.binding.impl.SAMLAddAttributeConsumingServiceHandler' on INBOUND message context
2019-07-31 19:12:15,181 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,185 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.profile.impl.InitializeRelyingPartyContextFromSAMLPeer:132] - Profile Action InitializeRelyingPartyContextFromSAMLPeer: Attaching RelyingPartyContext based on SAML peer https://sptest.pku.edu.cn/shibboleth
2019-07-31 19:12:15,188 - 162.105.126.239 - DEBUG [net.shibboleth.idp.relyingparty.impl.DefaultRelyingPartyConfigurationResolver:293] - Resolving relying party configuration
2019-07-31 19:12:15,188 - 162.105.126.239 - DEBUG [net.shibboleth.idp.relyingparty.impl.DefaultRelyingPartyConfigurationResolver:314] - No relying party configurations are applicable, returning the default configuration shibboleth.DefaultRelyingParty
2019-07-31 19:12:15,188 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.SelectRelyingPartyConfiguration:136] - Profile Action SelectRelyingPartyConfiguration: Found relying party configuration shibboleth.DefaultRelyingParty for request
2019-07-31 19:12:15,195 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.PopulateProfileInterceptorContext:126] - Profile Action PopulateProfileInterceptorContext: Installing flow intercept/security-policy/saml2-sso into interceptor context
2019-07-31 19:12:15,198 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.FilterFlowsByNonBrowserSupport:52] - Profile Action FilterFlowsByNonBrowserSupport: Request does not have non-browser requirement, nothing to do
2019-07-31 19:12:15,199 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.SelectProfileInterceptorFlow:101] - Profile Action SelectProfileInterceptorFlow: Checking flow intercept/security-policy/saml2-sso for applicability...
2019-07-31 19:12:15,199 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.SelectProfileInterceptorFlow:84] - Profile Action SelectProfileInterceptorFlow: Selecting flow intercept/security-policy/saml2-sso
2019-07-31 19:12:15,202 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.saml.common.binding.security.impl.ReceivedEndpointSecurityHandler' on INBOUND message context
2019-07-31 19:12:15,202 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,204 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.saml.common.binding.security.impl.MessageReplaySecurityHandler' on INBOUND message context
2019-07-31 19:12:15,205 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,207 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.saml.common.binding.security.impl.MessageLifetimeSecurityHandler' on INBOUND message context
2019-07-31 19:12:15,207 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,208 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.saml.saml2.binding.security.impl.SAML2AuthnRequestsSignedSecurityHandler' on INBOUND message context
2019-07-31 19:12:15,208 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,209 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.saml.common.binding.security.impl.SAMLProtocolMessageXMLSignatureSecurityHandler' on INBOUND message context
2019-07-31 19:12:15,209 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,212 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.saml.saml2.binding.security.impl.SAML2HTTPRedirectDeflateSignatureSecurityHandler' on INBOUND message context
2019-07-31 19:12:15,212 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,214 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.saml.saml2.binding.security.impl.SAML2HTTPPostSimpleSignSecurityHandler' on INBOUND message context
2019-07-31 19:12:15,215 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,217 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.messaging.handler.impl.CheckMandatoryIssuer' on INBOUND message context
2019-07-31 19:12:15,217 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,218 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.WriteProfileInterceptorResultToStorage:68] - Profile Action WriteProfileInterceptorResultToStorage: No results available from interceptor context, nothing to store
2019-07-31 19:12:15,218 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.FilterFlowsByNonBrowserSupport:52] - Profile Action FilterFlowsByNonBrowserSupport: Request does not have non-browser requirement, nothing to do
2019-07-31 19:12:15,218 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.SelectProfileInterceptorFlow:65] - Profile Action SelectProfileInterceptorFlow: Moving completed flow intercept/security-policy/saml2-sso to completed set, selecting next one
2019-07-31 19:12:15,219 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.SelectProfileInterceptorFlow:80] - Profile Action SelectProfileInterceptorFlow: No flows available to choose from
2019-07-31 19:12:15,220 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.profile.impl.InitializeOutboundMessageContext:149] - Profile Action InitializeOutboundMessageContext: Initialized outbound message context
2019-07-31 19:12:15,226 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.profile.impl.PopulateBindingAndEndpointContexts:375] - Profile Action PopulateBindingAndEndpointContexts: Attempting to resolve endpoint of type {urn:oasis:names:tc:SAML:2.0:metadata}AssertionConsumerService for outbound message
2019-07-31 19:12:15,227 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.profile.impl.PopulateBindingAndEndpointContexts:516] - Profile Action PopulateBindingAndEndpointContexts: Populating template endpoint for resolution from SAML AuthnRequest
2019-07-31 19:12:15,227 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.profile.impl.PopulateBindingAndEndpointContexts:418] - Profile Action PopulateBindingAndEndpointContexts: Resolved endpoint at location https://sptest.pku.edu.cn/Shibboleth.sso/SAML2/POST using binding urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST
2019-07-31 19:12:15,231 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.delegation.impl.PopulateDelegationContext:387] - No AttributeConsumingService was resolved, won't be able to determine delegation requested status via metadata
2019-07-31 19:12:15,231 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.delegation.impl.PopulateDelegationContext:520] - No AttributeConsumingService was available
2019-07-31 19:12:15,232 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.delegation.impl.PopulateDelegationContext:505] - Delegation request was not explicitly indicated, using default value: NOT_REQUESTED
2019-07-31 19:12:15,232 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.delegation.impl.PopulateDelegationContext:294] - Issuance of a delegated Assertion is not in effect, skipping further processing
2019-07-31 19:12:15,240 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.impl.PopulateEncryptionParameters:296] - Profile Action PopulateEncryptionParameters: Encryption for assertions (true), identifiers (false), attributes(false)
2019-07-31 19:12:15,241 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.impl.PopulateEncryptionParameters:306] - Profile Action PopulateEncryptionParameters: Resolving EncryptionParameters for request
2019-07-31 19:12:15,241 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.impl.PopulateEncryptionParameters:371] - Profile Action PopulateEncryptionParameters: Adding entityID to resolution criteria
2019-07-31 19:12:15,242 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.impl.PopulateEncryptionParameters:382] - Profile Action PopulateEncryptionParameters: Adding role metadata to resolution criteria
2019-07-31 19:12:15,242 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.impl.PopulateEncryptionParameters:322] - Profile Action PopulateEncryptionParameters: Resolved EncryptionParameters
2019-07-31 19:12:15,254 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.profile.impl.ExtractSubjectFromRequest:144] - Profile Action ExtractSubjectFromRequest: No Subject NameID/NameIdentifier in message needs inbound processing
2019-07-31 19:12:15,257 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:174] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.saml.saml2.binding.impl.ExtractProxiedRequestersHandler' on INBOUND message context
2019-07-31 19:12:15,257 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.AuthnRequestImpl'
2019-07-31 19:12:15,263 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.profile.impl.InitializeAuthenticationContext:138] - Profile Action InitializeAuthenticationContext: Created authentication context: AuthenticationContext{initiationInstant=2019-07-31T19:12:15.263+08:00, isPassive=false, forceAuthn=false, hintedName=null, maxAge=0, potentialFlows=[], activeResults=[], attemptedFlow=null, signaledFlowId=null, authenticationStateMap={}, resultCacheable=true, initialAuthenticationResult=null, authenticationResult=null, completionInstant=1970-01-01T08:00:00.000+08:00}
2019-07-31 19:12:15,267 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.impl.ProcessRequestedAuthnContext:174] - Profile Action ProcessRequestedAuthnContext: AuthnRequest did not contain a RequestedAuthnContext, nothing to do
2019-07-31 19:12:15,273 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.PopulateAuthenticationContext:221] - Profile Action PopulateAuthenticationContext: Installed 1 potential authentication flows into AuthenticationContext
2019-07-31 19:12:15,277 - 162.105.126.239 - DEBUG [net.shibboleth.idp.session.impl.PopulateSessionContext:154] - Profile Action PopulateSessionContext: No session found for client
2019-07-31 19:12:15,286 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.InitializeRequestedPrincipalContext:152] - Profile Action InitializeRequestedPrincipalContext: Profile configuration did not supply any default authentication methods
2019-07-31 19:12:15,287 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.FilterFlowsByForcedAuthn:53] - Profile Action FilterFlowsByForcedAuthn: Request does not have forced authentication requirement, nothing to do
2019-07-31 19:12:15,287 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.FilterFlowsByNonBrowserSupport:53] - Profile Action FilterFlowsByNonBrowserSupport: Request does not have non-browser requirement, nothing to do
2019-07-31 19:12:15,291 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.SelectAuthenticationFlow:264] - Profile Action SelectAuthenticationFlow: No specific Principals requested
2019-07-31 19:12:15,292 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.SelectAuthenticationFlow:309] - Profile Action SelectAuthenticationFlow: No usable active results available, selecting an inactive flow
2019-07-31 19:12:15,292 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.SelectAuthenticationFlow:363] - Profile Action SelectAuthenticationFlow: Selecting inactive authentication flow authn/Shiboauth2
2019-07-31 19:12:16,983 - 162.105.126.239 - INFO [net.shibboleth.idp.authn.impl.ValidateExternalAuthentication:139] - Profile Action ValidateExternalAuthentication: External authentication succeeded for Subject: [IdPAttributePrincipal{attribute=IdPAttribute{id=uid, displayNames={}, displayDescriptions={}, encoders=[], values=[StringAttributeValue{value=20190606}]}}, IdPAttributePrincipal{attribute=IdPAttribute{id=eduPersonScopedAffiliation, displayNames={}, displayDescriptions={}, encoders=[], values=[StringAttributeValue{value=faculty@pku.edu.cn}]}}, IdPAttributePrincipal{attribute=IdPAttribute{id=success, displayNames={}, displayDescriptions={}, encoders=[], values=[StringAttributeValue{value=true}]}}, UsernamePrincipal{username=20190606}]
2019-07-31 19:12:16,983 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.AbstractValidationAction:354] - Profile Action ValidateExternalAuthentication: Adding custom Principal(s) defined on underlying flow descriptor
2019-07-31 19:12:16,986 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.PopulateSubjectCanonicalizationContext:79] - Profile Action PopulateSubjectCanonicalizationContext: Installing 2 canonicalization flows into SubjectCanonicalizationContext
2019-07-31 19:12:16,987 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.SelectSubjectCanonicalizationFlow:100] - Profile Action SelectSubjectCanonicalizationFlow: Checking canonicalization flow c14n/x500 for applicability...
2019-07-31 19:12:16,987 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.SelectSubjectCanonicalizationFlow:106] - Profile Action SelectSubjectCanonicalizationFlow: Canonicalization flow c14n/x500 was not applicable to this request
2019-07-31 19:12:16,987 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.SelectSubjectCanonicalizationFlow:100] - Profile Action SelectSubjectCanonicalizationFlow: Checking canonicalization flow c14n/simple for applicability...
2019-07-31 19:12:16,987 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.SelectSubjectCanonicalizationFlow:83] - Profile Action SelectSubjectCanonicalizationFlow: Selecting canonicalization flow c14n/simple
2019-07-31 19:12:16,991 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.AbstractSubjectCanonicalizationAction:226] - Profile Action SimpleSubjectCanonicalization: trimming whitespace of input string '20190606'
2019-07-31 19:12:16,995 - 162.105.126.239 - DEBUG [net.shibboleth.idp.session.impl.DetectIdentitySwitch:148] - Profile Action DetectIdentitySwitch: No previous session found, nothing to do
2019-07-31 19:12:16,998 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.FinalizeAuthentication:138] - Profile Action FinalizeAuthentication: Canonical principal name was established as '20190606'
2019-07-31 19:12:16,999 - 162.105.126.239 - DEBUG [net.shibboleth.idp.authn.impl.FinalizeAuthentication:187] - Profile Action FinalizeAuthentication: Request did not have explicit authentication requirements, result is accepted
2019-07-31 19:12:17,003 - 162.105.126.239 - DEBUG [net.shibboleth.idp.session.impl.UpdateSessionWithAuthenticationResult:221] - Profile Action UpdateSessionWithAuthenticationResult: Creating new session for principal 20190606
2019-07-31 19:12:17,003 - 162.105.126.239 - DEBUG [net.shibboleth.idp.session.impl.StorageBackedSessionManager:534] - Created new session a2b9943f7c6dadae47c2689efb5768d929da4bc98f89ebb096fe474665ec579a for principal 20190606
2019-07-31 19:12:17,004 - 162.105.126.239 - DEBUG [net.shibboleth.idp.session.impl.StorageBackedIdPSession:569] - Saving AuthenticationResult for flow authn/Shiboauth2 in session a2b9943f7c6dadae47c2689efb5768d929da4bc98f89ebb096fe474665ec579a
2019-07-31 19:12:17,008 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.resolver.impl.AttributeResolverImpl:244] - Attribute Resolver 'ShibbolethAttributeResolver': Initiating attribute resolution
2019-07-31 19:12:17,009 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.resolver.impl.AttributeResolverImpl:252] - Attribute Resolver 'ShibbolethAttributeResolver': Attempting to resolve the following attribute definitions [eduPersonScopedAffiliation]
2019-07-31 19:12:17,009 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.resolver.ad.impl.ContextDerivedAttributeDefinition:110] - SubjectDerivedAttributeDefinitioneduPersonScopedAffiliation Generated 1 values.
2019-07-31 19:12:17,010 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.resolver.ad.impl.ContextDerivedAttributeDefinition:102] - Attribute Definition 'eduPersonScopedAffiliation': Generated 1 values.
2019-07-31 19:12:17,010 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.resolver.AbstractAttributeDefinition:264] - Attribute Definition 'eduPersonScopedAffiliation': produced an attribute with the following values [StringAttributeValue{value=faculty@pku.edu.cn}]
2019-07-31 19:12:17,011 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.resolver.impl.AttributeResolverImpl:339] - Attribute Resolver 'ShibbolethAttributeResolver': Attribute definition 'eduPersonScopedAffiliation' produced an attribute with 1 values
2019-07-31 19:12:17,011 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.resolver.impl.AttributeResolverImpl:262] - Attribute Resolver 'ShibbolethAttributeResolver': Finalizing resolved attributes
2019-07-31 19:12:17,011 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.resolver.impl.AttributeResolverImpl:501] - Attribute Resolver 'ShibbolethAttributeResolver': De-duping (and null filtering) attribute definition eduPersonScopedAffiliation result
2019-07-31 19:12:17,012 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.resolver.impl.AttributeResolverImpl:533] - Attribute Resolver 'ShibbolethAttributeResolver': Attribute 'eduPersonScopedAffiliation' has 1 values after post-processing
2019-07-31 19:12:17,012 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.resolver.impl.AttributeResolverImpl:267] - Attribute Resolver 'ShibbolethAttributeResolver': Final resolved attribute collection: [eduPersonScopedAffiliation]
2019-07-31 19:12:17,016 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.filter.impl.AttributeFilterImpl:125] - Attribute filtering engine 'ShibbolethAttributeFilter'  Beginning process of filtering the following 1 attributes: [eduPersonScopedAffiliation]
2019-07-31 19:12:17,017 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.filter.AttributeFilterPolicy:128] - Attribute Filter Policy 'example1'  Checking if attribute filter policy is active
2019-07-31 19:12:17,017 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.filter.AttributeFilterPolicy:135] - Attribute Filter Policy 'example1'  Policy is active for this request
2019-07-31 19:12:17,017 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.filter.AttributeFilterPolicy:162] - Attribute Filter Policy 'example1'  Applying attribute filter policy to current set of attributes: [eduPersonScopedAffiliation]
2019-07-31 19:12:17,018 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.filter.AttributeRule:168] - Attribute filtering engine '/AttributeFilterPolicyGroup:ShibbolethFilterPolicy/AttributeRule:_dafe29950d2021999362d866707c55da'  Filtering values for attribute 'eduPersonScopedAffiliation' which currently contains 1 values
2019-07-31 19:12:17,018 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.filter.AttributeRule:177] - Attribute filtering engine '/AttributeFilterPolicyGroup:ShibbolethFilterPolicy/AttributeRule:_dafe29950d2021999362d866707c55da'  Filter has permitted the release of 1 values for attribute 'eduPersonScopedAffiliation'
2019-07-31 19:12:17,018 - 162.105.126.239 - DEBUG [net.shibboleth.idp.attribute.filter.impl.AttributeFilterImpl:189] - Attribute filtering engine 'ShibbolethAttributeFilter': 1 values for attribute 'eduPersonScopedAffiliation' remained after filtering
2019-07-31 19:12:17,019 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.PopulateProfileInterceptorContext:126] - Profile Action PopulateProfileInterceptorContext: Installing flow intercept/attribute-release into interceptor context
2019-07-31 19:12:17,020 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.FilterFlowsByNonBrowserSupport:52] - Profile Action FilterFlowsByNonBrowserSupport: Request does not have non-browser requirement, nothing to do
2019-07-31 19:12:17,021 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.SelectProfileInterceptorFlow:101] - Profile Action SelectProfileInterceptorFlow: Checking flow intercept/attribute-release for applicability...
2019-07-31 19:12:17,021 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.SelectProfileInterceptorFlow:84] - Profile Action SelectProfileInterceptorFlow: Selecting flow intercept/attribute-release
2019-07-31 19:12:17,022 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.impl.InitializeConsentContext:47] - Profile Action InitializeConsentContext: Created consent context 'ConsentContext{previousConsents={}, chosenConsents={}}'
2019-07-31 19:12:17,023 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.ar.impl.InitializeAttributeReleaseContext:47] - Profile Action InitializeAttributeReleaseContext: Created attribute release context 'AttributeReleaseContext{consentableAttributes={}}'
2019-07-31 19:12:17,027 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.ar.impl.AbstractAttributeReleaseAction:153] - Profile Action PopulateAttributeReleaseContext: Found attributeContext 'net.shibboleth.idp.attribute.context.AttributeContext@14c5262c'
2019-07-31 19:12:17,028 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.ar.impl.PopulateAttributeReleaseContext:99] - Profile Action PopulateAttributeReleaseContext: Consentable attributes '{eduPersonScopedAffiliation=IdPAttribute{id=eduPersonScopedAffiliation, displayNames={}, displayDescriptions={}, encoders=[net.shibboleth.idp.saml.attribute.encoding.impl.SAML2StringAttributeEncoder@23ac74, net.shibboleth.idp.saml.attribute.encoding.impl.SAML1StringAttributeEncoder@bab64ea8], values=[StringAttributeValue{value=faculty@pku.edu.cn}]}}'
2019-07-31 19:12:17,033 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.logic.impl.FlowIdLookupFunction:69] - Current flow id is 'intercept/attribute-release'
2019-07-31 19:12:17,033 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.logic.impl.JoinFunction:81] - Result '20190606:https://sptest.pku.edu.cn/shibboleth'
2019-07-31 19:12:17,034 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.storage.impl.ReadConsentFromStorage:53] - Profile Action ReadConsentFromStorage: Read storage record 'null' with context 'intercept/attribute-release' and key '20190606:https://sptest.pku.edu.cn/shibboleth'
2019-07-31 19:12:17,034 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.storage.impl.ReadConsentFromStorage:57] - Profile Action ReadConsentFromStorage: No storage record for context 'intercept/attribute-release' and key '20190606:https://sptest.pku.edu.cn/shibboleth'
2019-07-31 19:12:17,035 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.logic.impl.FlowIdLookupFunction:69] - Current flow id is 'intercept/attribute-release'
2019-07-31 19:12:17,036 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.storage.impl.ReadConsentFromStorage:53] - Profile Action ReadConsentFromStorage: Read storage record 'null' with context 'intercept/attribute-release' and key '20190606'
2019-07-31 19:12:17,036 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.storage.impl.ReadConsentFromStorage:57] - Profile Action ReadConsentFromStorage: No storage record for context 'intercept/attribute-release' and key '20190606'
2019-07-31 19:12:17,038 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.impl.PopulateConsentContext:65] - Profile Action PopulateConsentContext: Populating consents: [eduPersonScopedAffiliation]
2019-07-31 19:12:17,039 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.logic.impl.IsConsentRequiredPredicate:109] - Consent is required, no previous consents           åŠ¡'
2019-07-31 19:12:17,048 - 162.105.126.239 - DEBUG [net.shibboleth.idp.ui.context.RelyingPartyUIContext:390] - No matching description in UIInfo¬å¤§å­¦é¢„ä¸Šçº¿çŽ¯å¢ƒæµ‹è¯•SPæœ
2019-07-31 19:12:17,048 - 162.105.126.239 - DEBUG [net.shibboleth.idp.ui.context.RelyingPartyUIContext:390] - No matching description in UIInfo
2019-07-31 19:12:17,048 - 162.105.126.239 - DEBUG [net.shibboleth.idp.ui.context.RelyingPartyUIContext:656] - No UIInfo or InformationURLs returning null
2019-07-31 19:12:17,049 - 162.105.126.239 - DEBUG [net.shibboleth.idp.ui.context.RelyingPartyUIContext:681] - No UIInfo or PrivacyStatementURLs returning null
2019-07-31 19:12:17,049 - 162.105.126.239 - DEBUG [net.shibboleth.idp.ui.context.RelyingPartyUIContext:776] - Returning logo from UIInfo, (80 x 80) : https://mgmt.carsi.edu.cn/member_files/pku.edu.cn/pku.edu.cn-logo.png
2019-07-31 19:12:17,049 - 162.105.126.239 - DEBUG [net.shibboleth.idp.ui.context.RelyingPartyUIContext:264] - Acceptable Scheme 'https', returning value 'https://mgmt.carsi.edu.cn/member_files/pku.edu.cn/pku.edu.cn-logo.png'
2019-07-31 19:12:17,049 - 162.105.126.239 - DEBUG [net.shibboleth.idp.ui.context.RelyingPartyUIContext:569] - Returning OrganizationName from Organization, Peking University
2019-07-31 19:12:18,311 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.impl.ExtractConsent:81] - Profile Action ExtractConsent: Extracted consent ids '[eduPersonScopedAffiliation]' from request parameter '_shib_idp_consentIds'
2019-07-31 19:12:18,312 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.impl.ExtractConsent:93] - Profile Action ExtractConsent: Consent context 'ConsentContext{previousConsents={}, chosenConsents={eduPersonScopedAffiliation=Consent{id=eduPersonScopedAffiliation, value=null, isApproved=true}}}'
2019-07-31 19:12:18,313 - 162.105.126.239 - INFO [Shibboleth-Consent-Audit.SSO:275] - 20190731T111218Z|https://sptest.pku.edu.cn/shibboleth|AttributeReleaseConsent|20190606|eduPersonScopedAffiliation||true
2019-07-31 19:12:18,317 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.logic.impl.FlowIdLookupFunction:69] - Current flow id is 'intercept/attribute-release'
2019-07-31 19:12:18,317 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.logic.impl.JoinFunction:81] - Result '20190606:https://sptest.pku.edu.cn/shibboleth'
2019-07-31 19:12:18,317 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.logic.impl.JoinFunction:81] - Result '20190606:_key_idx'
2019-07-31 19:12:18,317 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.storage.impl.ConsentSerializer:209] - Serialized '{eduPersonScopedAffiliation=Consent{id=eduPersonScopedAffiliation, value=null, isApproved=true}}' as '[{"id":308}]'
2019-07-31 19:12:18,318 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.storage.impl.CreateResult:79] - Profile Action CreateResult: Created consent result 'ConsentResult{id=null, context=intercept/attribute-release, key=20190606:https://sptest.pku.edu.cn/shibboleth, value=[{"id":308}], expiration=1596107538318}'
2019-07-31 19:12:18,318 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.storage.impl.AbstractConsentIndexedStorageAction:177] - Profile Action CreateResult: Read storage record 'null' with context 'intercept/attribute-release' and key '20190606:_key_idx'
2019-07-31 19:12:18,318 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.storage.impl.AbstractConsentIndexedStorageAction:279] - Profile Action CreateResult: Will not prune storage records, number of keys '0' is less than max number of records '10'
2019-07-31 19:12:18,318 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.storage.impl.AbstractConsentIndexedStorageAction:198] - Profile Action CreateResult: Read storage record 'null' with context 'intercept/attribute-release' and key '20190606:_key_idx'
2019-07-31 19:12:18,319 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.storage.impl.AbstractConsentIndexedStorageAction:202] - Profile Action CreateResult: Creating storage index with key '20190606:https://sptest.pku.edu.cn/shibboleth'
2019-07-31 19:12:18,319 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.storage.impl.CollectionSerializer:90] - Serialized '[20190606:https://sptest.pku.edu.cn/shibboleth]' as '["20190606:https://sptest.pku.edu.cn/shibboleth"]'
2019-07-31 19:12:18,319 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.ar.impl.AbstractAttributeReleaseAction:153] - Profile Action ReleaseAttributes: Found attributeContext 'net.shibboleth.idp.attribute.context.AttributeContext@14c5262c'
2019-07-31 19:12:18,319 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.ar.impl.ReleaseAttributes:64] - Profile Action ReleaseAttributes: Consents '{eduPersonScopedAffiliation=Consent{id=eduPersonScopedAffiliation, value=null, isApproved=true}}'
2019-07-31 19:12:18,320 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.ar.impl.ReleaseAttributes:67] - Profile Action ReleaseAttributes: Attributes before release '{eduPersonScopedAffiliation=IdPAttribute{id=eduPersonScopedAffiliation, displayNames={}, displayDescriptions={}, encoders=[net.shibboleth.idp.saml.attribute.encoding.impl.SAML2StringAttributeEncoder@23ac74, net.shibboleth.idp.saml.attribute.encoding.impl.SAML1StringAttributeEncoder@bab64ea8], values=[StringAttributeValue{value=faculty@pku.edu.cn}]}}'
2019-07-31 19:12:18,320 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.ar.impl.ReleaseAttributes:85] - Profile Action ReleaseAttributes: Attribute 'IdPAttribute{id=eduPersonScopedAffiliation, displayNames={}, displayDescriptions={}, encoders=[net.shibboleth.idp.saml.attribute.encoding.impl.SAML2StringAttributeEncoder@23ac74, net.shibboleth.idp.saml.attribute.encoding.impl.SAML1StringAttributeEncoder@bab64ea8], values=[StringAttributeValue{value=faculty@pku.edu.cn}]}' will be released because consent is approved
2019-07-31 19:12:18,320 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.ar.impl.ReleaseAttributes:94] - Profile Action ReleaseAttributes: Releasing attributes '{eduPersonScopedAffiliation=IdPAttribute{id=eduPersonScopedAffiliation, displayNames={}, displayDescriptions={}, encoders=[net.shibboleth.idp.saml.attribute.encoding.impl.SAML2StringAttributeEncoder@23ac74, net.shibboleth.idp.saml.attribute.encoding.impl.SAML1StringAttributeEncoder@bab64ea8], values=[StringAttributeValue{value=faculty@pku.edu.cn}]}}'
2019-07-31 19:12:18,321 - 162.105.126.239 - DEBUG [net.shibboleth.idp.consent.flow.ar.impl.ReleaseAttributes:96] - Profile Action ReleaseAttributes: Not releasing attributes '{}'
2019-07-31 19:12:18,321 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.WriteProfileInterceptorResultToStorage:68] - Profile Action WriteProfileInterceptorResultToStorage: No results available from interceptor context, nothing to store
2019-07-31 19:12:18,321 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.FilterFlowsByNonBrowserSupport:52] - Profile Action FilterFlowsByNonBrowserSupport: Request does not have non-browser requirement, nothing to do
2019-07-31 19:12:18,322 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.SelectProfileInterceptorFlow:65] - Profile Action SelectProfileInterceptorFlow: Moving completed flow intercept/attribute-release to completed set, selecting next one
2019-07-31 19:12:18,322 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.interceptor.impl.SelectProfileInterceptorFlow:80] - Profile Action SelectProfileInterceptorFlow: No flows available to choose from
2019-07-31 19:12:18,334 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.profile.impl.BaseAddAuthenticationStatementToAssertion:170] - Profile Action AddAuthnStatementToAssertion: Attempting to add an AuthenticationStatement to outgoing Assertion
2019-07-31 19:12:18,335 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.impl.AddAuthnStatementToAssertion:168] - Profile Action AddAuthnStatementToAssertion: Added AuthenticationStatement to Assertion _eb644a2a3f7e56b1b66b514163178b6a
2019-07-31 19:12:18,342 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.profile.impl.BaseAddAttributeStatementToAssertion:229] - Profile Action AddAttributeStatementToAssertion: Attempting to add an AttributeStatement to outgoing Assertion
2019-07-31 19:12:18,343 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.impl.AddAttributeStatementToAssertion:173] - Profile Action AddAttributeStatementToAssertion: Attempting to encode attribute eduPersonScopedAffiliation as a SAML 2 Attribute
2019-07-31 19:12:18,343 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.impl.AddAttributeStatementToAssertion:187] - Profile Action AddAttributeStatementToAssertion: Encoding attribute eduPersonScopedAffiliation as a SAML 2 Attribute
2019-07-31 19:12:18,344 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.attribute.encoding.AbstractSAMLAttributeEncoder:154] - Beginning to encode attribute eduPersonScopedAffiliation
2019-07-31 19:12:18,344 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.attribute.encoding.SAMLEncoderSupport:73] - Encoding value faculty@pku.edu.cn of attribute eduPersonScopedAffiliation
2019-07-31 19:12:18,344 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.attribute.encoding.AbstractSAMLAttributeEncoder:191] - Completed encoding 1 values for attribute eduPersonScopedAffiliation
2019-07-31 19:12:18,345 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.impl.AddAttributeStatementToAssertion:116] - Profile Action AddAttributeStatementToAssertion: Adding constructed AttributeStatement to Assertion _eb644a2a3f7e56b1b66b514163178b6a
2019-07-31 19:12:18,348 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.profile.logic.DefaultNameIdentifierFormatStrategy:125] - Configuration specifies the following formats: []
2019-07-31 19:12:18,349 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.profile.logic.DefaultNameIdentifierFormatStrategy:135] - No formats specified in configuration or in metadata, returning default
2019-07-31 19:12:18,367 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.delegation.impl.DecorateDelegatedAssertion:592] - Found Assertion with AuthnStatement to decorate in outbound Response
2019-07-31 19:12:18,368 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.saml2.profile.delegation.impl.DecorateDelegatedAssertion:290] - Issuance of delegated was not indicated, skipping assertion decoration
2019-07-31 19:12:18,392 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:179] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler of type 'org.opensaml.messaging.handler.impl.BasicMessageHandlerChain' on OUTBOUND message context
2019-07-31 19:12:18,393 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.WebFlowMessageHandlerAdaptor:195] - Profile Action WebFlowMessageHandlerAdaptor: Invoking message handler on message context containing a message of type 'org.opensaml.saml.saml2.core.impl.ResponseImpl'
2019-07-31 19:12:18,406 - 162.105.126.239 - DEBUG [net.shibboleth.idp.saml.profile.impl.SpringAwareMessageEncoderFactory:100] - Looking up message encoder based on binding URI: urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST
2019-07-31 19:12:18,412 - 162.105.126.239 - DEBUG [net.shibboleth.idp.profile.impl.RecordResponseComplete:89] - Profile Action RecordResponseComplete: Record response complete
2019-07-31 19:12:18,413 - 162.105.126.239 - INFO [Shibboleth-Audit.SSO:275] - 20190731T111218Z|urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect|_f2945c98f1e3e30bf5391a65265bfd53|https://sptest.pku.edu.cn/shibboleth|http://shibboleth.net/ns/profiles/saml2/sso/browser|https://idp3oauth.pku.edu.cn/idp/shibboleth|urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST|_834f472bf25368a7ab73635da0d96da7|20190606|urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport|eduPersonScopedAffiliation|AAdzZWNyZXQxPG2BEZD/yX9h0cEwHh8baoHxELKpGNSUJyS5xRTcH5lpX0GAA1kTZ7C8w2nXjm+mzpuANiCWmoSIz77eeW6LoWoMi0i3Zc3JMuwwDoW/sOHRHM4ba1HjvQkMBA/4PWHECdx9cvSW4zoMNqw=|_eb644a2a3f7e56b1b66b514163178b6a|true

